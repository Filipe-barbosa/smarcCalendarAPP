import{r as t}from"./react-59dd11ab.js";import{r as $}from"./react-dom-6dd3ed0a.js";import{r as D}from"./react-fast-compare-b6572a53.js";import{c as A}from"./@popperjs-f3391c26.js";var g=t.createContext(),F=t.createContext();function B(u){var r=u.children,e=t.useState(null),n=e[0],o=e[1],a=t.useRef(!1);t.useEffect(function(){return function(){a.current=!0}},[]);var l=t.useCallback(function(d){a.current||o(d)},[]);return t.createElement(g.Provider,{value:n},t.createElement(F.Provider,{value:l},r))}var I=function(r){return Array.isArray(r)?r[0]:r},N=function(r){if(typeof r=="function"){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return r.apply(void 0,n)}},S=function(r,e){if(typeof r=="function")return N(r,e);r!=null&&(r.current=e)},M=function(r){return r.reduce(function(e,n){var o=n[0],a=n[1];return e[o]=a,e},{})},U=typeof window<"u"&&window.document&&window.document.createElement?t.useLayoutEffect:t.useEffect,k=[],H=function(r,e,n){n===void 0&&(n={});var o=t.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||k},l=t.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),d=l[0],P=l[1],v=t.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(p){var m=p.state,R=Object.keys(m.elements);$.flushSync(function(){P({styles:M(R.map(function(c){return[c,m.styles[c]||{}]})),attributes:M(R.map(function(c){return[c,m.attributes[c]]}))})})},requires:["computeStyles"]}},[]),y=t.useMemo(function(){var i={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[v,{name:"applyStyles",enabled:!1}])};return D(o.current,i)?o.current||i:(o.current=i,i)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,v]),s=t.useRef();return U(function(){s.current&&s.current.setOptions(y)},[y]),U(function(){if(!(r==null||e==null)){var i=n.createPopper||A,p=i(r,e,y);return s.current=p,function(){p.destroy(),s.current=null}}},[r,e,n.createPopper]),{state:s.current?s.current.state:null,styles:d.styles,attributes:d.attributes,update:s.current?s.current.update:null,forceUpdate:s.current?s.current.forceUpdate:null}},L=function(){},T=function(){return Promise.resolve(null)},Y=[];function G(u){var r=u.placement,e=r===void 0?"bottom":r,n=u.strategy,o=n===void 0?"absolute":n,a=u.modifiers,l=a===void 0?Y:a,d=u.referenceElement,P=u.onFirstUpdate,v=u.innerRef,y=u.children,s=t.useContext(g),i=t.useState(null),p=i[0],m=i[1],R=t.useState(null),c=R[0],w=R[1];t.useEffect(function(){S(v,p)},[v,p]);var x=t.useMemo(function(){return{placement:e,strategy:o,onFirstUpdate:P,modifiers:[].concat(l,[{name:"arrow",enabled:c!=null,options:{element:c}}])}},[e,o,P,l,c]),E=H(d||s,p,x),f=E.state,h=E.styles,O=E.forceUpdate,b=E.update,C=t.useMemo(function(){return{ref:m,style:h.popper,placement:f?f.placement:e,hasPopperEscaped:f&&f.modifiersData.hide?f.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:f&&f.modifiersData.hide?f.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:h.arrow,ref:w},forceUpdate:O||L,update:b||T}},[m,w,e,f,h,b,O]);return I(y)(C)}function J(u){var r=u.children,e=u.innerRef,n=t.useContext(F),o=t.useCallback(function(a){S(e,a),N(n,a)},[e,n]);return t.useEffect(function(){return function(){return S(e,null)}},[]),t.useEffect(function(){},[n]),I(r)({ref:o})}export{B as M,G as P,J as R};
